<div *ngIf="noticiasInfo" id="noticias">
    <!--Miga de pan-->
    <div fxLayout="row" id="miga-de-pan">
        <svg-icon key="flechaRetorno"></svg-icon>
        <span class="enlace">
    <a [routerLink]="['']">{{noticiasInfo.generales.inicio}}</a>
  </span>
        <mat-icon class="icono">keyboard_arrow_right</mat-icon>
        <span class="enlace">
    <a
        *ngIf="!administrar"
        [routerLink]="['/noticias']"
        [routerLinkActive]="['link-activo']"
        class="actual"
    >{{noticiasInfo.cabecera.noticias}}</a>
    <a
        *ngIf="administrar"
        [routerLink]="['/gestionNoticias']"
        [routerLinkActive]="['link-activo']"
        class="actual"
    >{{noticiasInfo.cabecera.gestion_noticias}}</a>
  </span>
    </div>
    <br>
    <!--Filtros-->
    <div class="filtro contenedor" fxLayout="row" fxLayoutAlign="end center" fxLayoutAlign.lt-md="end start" fxLayoutGap="20px">
        <span fxFlex="40" fxFlex.lt-md style="text-align: right;">{{noticiasInfo.noticias.filtrar}}</span>

        <div fxFlex fxFlex.lt-md="250px" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="60px" fxLayoutGap.lt-md="20px" fxLayoutAlign.lt-md="center end">
            <div class="box" fxFlex>
                <form [formGroup]="formFiltroNoticias">
                    <mat-form-field appearance="outline">
                        <mat-label>{{noticiasInfo.noticias.pais}}</mat-label>
                        <mat-select formControlName="pais" multiple (valueChange)="filtroPais.setValue('')" style="height: 1vh;">
                            <input class="campo-buscar" matInput [formControl]="filtroPais" placeholder="{{noticiasInfo.noticias.buscar}}" #buscarPais value="">
                            <mat-option #option [ngClass]="optionPais(pais, option)" *ngFor="let pais of filteredPais | async" [value]="pais">
                                {{getDescripcionPais(pais)}}
                                <span class="cantidad">{{pais.cantidad}}</span>
                            </mat-option>
                        </mat-select>
                        <mat-icon class="icono-select">
                            expand_more
                        </mat-icon>
                    </mat-form-field>
                </form>
            </div>

            <div class="box" fxFlex>
                <form [formGroup]="formFiltroNoticias">
                    <mat-form-field appearance="outline">
                        <mat-label>{{noticiasInfo.noticias.ano}}</mat-label>
                        <mat-select formControlName="ano" multiple (valueChange)="filtroAno.setValue('')">
                            <input class="campo-buscar" matInput [formControl]="filtroAno" placeholder="{{noticiasInfo.noticias.buscar}}" #buscarAno value="">
                            <mat-option #option [ngClass]="optionAno(ano, option)" *ngFor="let ano of filteredAno | async" [value]="ano">
                                {{ano.id}}
                                <span class="cantidad">{{ano.cantidad}}</span>
                            </mat-option>
                        </mat-select>
                        <mat-icon class="icono-select">
                            expand_more
                        </mat-icon>
                    </mat-form-field>
                </form>
            </div>

            <div class="box" fxFlex>
                <form [formGroup]="formFiltroNoticias">
                    <mat-form-field appearance="outline">
                        <mat-label>{{noticiasInfo.noticias.mes}}</mat-label>
                        <mat-select formControlName="mes" multiple (valueChange)="filtroMes.setValue('')">
                            <input class="campo-buscar" matInput [formControl]="filtroMes" placeholder="{{noticiasInfo.noticias.buscar}}" #buscarMes value="">
                            <mat-option #option [ngClass]="optionMes(mes, option)" *ngFor="let mes of filteredMeses | async" [value]="mes">
                                {{getMes(mes.id) | translate}}
                                <span class="cantidad"> {{mes.cantidad}} </span>
                            </mat-option>
                        </mat-select>
                        <mat-icon class="icono-select">
                            expand_more
                        </mat-icon>
                    </mat-form-field>
                </form>
            </div>
        </div>
    </div>

    <br>

    <!--Resumen de filtros-->
    <div class="contenedor">
        <mat-accordion *ngIf="mostrarFiltro">
            <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                <mat-expansion-panel-header>
                    <mat-panel-title>{{noticiasInfo.noticias.resumen}}</mat-panel-title>

                    <mat-panel-description></mat-panel-description>
                </mat-expansion-panel-header>

                <div fxLayout="row" fxLayout.lt-sm="column">
                    <div fxFlex="30">
                        <h4>{{noticiasInfo.noticias.pais}}:</h4>
                        <mat-chip-list class="chips" #chipList>
                            <mat-chip *ngFor="let item of paisSeleted" [removable]="true" (removed)="removePais(item)">
                                {{item.descripcion}}
                                <mat-icon matChipRemove *ngIf="true">{{noticiasInfo.noticias.cancel}}</mat-icon>
                            </mat-chip>
                        </mat-chip-list>
                    </div>
                    <div fxFlex="30">
                        <h4>{{noticiasInfo.noticias.ano}}:</h4>
                        <mat-chip-list class="chips" #chipList>
                            <mat-chip *ngFor="let item of anoSeleted" [removable]="true" (removed)="removeAno(item)">
                                {{item.descripcion}}
                                <mat-icon matChipRemove *ngIf="true">{{noticiasInfo.noticias.cancel}}</mat-icon>
                            </mat-chip>
                        </mat-chip-list>
                    </div>
                    <div fxFlex="30">
                        <h4>{{noticiasInfo.noticias.mes}}:</h4>
                        <mat-chip-list class="chips" #chipList>
                            <mat-chip *ngFor="let item of mesSeleted" [removable]="true" (removed)="removeMes(item)">
                                {{getMes(item.id)}}
                                <mat-icon matChipRemove *ngIf="true">{{noticiasInfo.noticias.cancel}}</mat-icon>
                            </mat-chip>
                        </mat-chip-list>
                    </div>
                    <div fxFlex fxLayout="row" fxLayoutAlign="center center">
                        <button (click)="limpiarFiltro()" class="btn-noticias">{{noticiasInfo.noticias.limpiar}}</button>
                    </div>
                </div>

                <p style="text-align: center; margin-top: 10px;">{{noticiasInfo.noticias.noticias}}: <span>{{registrosEncontrados}}</span></p>
            </mat-expansion-panel>
        </mat-accordion>
    </div>

    <div class="contenedor" *ngIf="administrar && idTipoSeccion != 1">
        <div class="row">
            <div class="col">
                <div style="color: #f07e00;margin: 20px 0 20px 6px; font-family: OpenSans-Bold, sans-serif; font-size: 16px; width: 200px; cursor: pointer;" (click)="openDialogNuevo()">
                    <img src="assets/svg/MasNuevo.svg" height="16px" alt="Agregar" style="float: left; margin-top: 3px;" />
                    <span style="margin-left: 10px;">{{noticiasInfo.noticias.agregar}}</span>
                </div>
            </div>
        </div>
    </div>

    <div class="contenedor">
        <div *ngIf="registrosEncontrados > 0" class="seccion-ultimas-noticias">
            <div class="contenedor">
                <div fxFlex="45">
                    <h2 id="titulo-noticias">{{noticiasInfo.noticias.noticias_2}}</h2>
                </div>
            </div>

            <div id="lista-noticias" fxLayout="row wrap" fxLayoutAlign="start" fxLayoutGap="12px">
                <div class="div-noticia" *ngFor="let noticia of noticias | paginate: configPaginador">
                    <app-card-noticia [idTipoSeccion]="idTipoSeccion" [listaPaises]="paisesListIdioma" (editar)="showEditar($event)" (eliminar)="showEliminar($event)" #card (mouseover)="card.administrar = mostrarOpciones()" (mouseleave)="card.administrar = false" [noticia]="noticia">
                    </app-card-noticia>
                </div>
            </div>

            <div fxLayout="row" fxLayoutAlign="end" fxLayoutAlign.lt-sm="center">
                <pagination-template #p="paginationApi" [id]="configPaginador.id" (pageChange)="pageChanged($event)">
                    <div class="custom-pagination" fxLayout="row">
                        <div *ngIf="!p.isFirstPage()" class="pagination-previous" [class.disabled]="p.isFirstPage()" (click)="p.previous()">
                            <span>
                <mat-icon class="flecha">keyboard_arrow_left</mat-icon>
              </span>
                        </div>
                        <div class="page-number" (click)="p.setCurrent(page.value)" *ngFor="let page of p.pages" [class.current]="p.getCurrent() === page.value">
                            <span *ngIf="p.getCurrent() !== page.value">{{ page.label }}</span>
                            <div *ngIf="p.getCurrent() === page.value">
                                <span>{{ page.label }}</span>
                            </div>
                        </div>
                        <div *ngIf="!p.isLastPage()" class="pagination-next" [class.disabled]="p.isLastPage()" (click)="p.next()">
                            <span *ngIf="!p.isLastPage()" (click)="p.next()">
                          <mat-icon class="flecha">
                              keyboard_arrow_right
                          </mat-icon>
                      </span>
                        </div>
                    </div>
                </pagination-template>
            </div>
        </div>
        <div *ngIf="registrosEncontrados < 1" class="sin-noticias">
            <label> {{noticiasInfo.noticias.noticias_2}}... </label>
        </div>
    </div>
</div>